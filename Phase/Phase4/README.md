# Phase 4 - Website construction (on a local machine)
소스파일은 레포지토리 메인의 phase4 및 phase4_sql 폴더 이용할 것

## System Constructure   
![image](https://user-images.githubusercontent.com/33113480/144088537-8789da3f-5406-47e2-ad0d-5a04f3641588.png)
   

최종 테스트 환경   
   
Window OS   
   
Oracle 19g   
   
ojdbc8.jar   
   
Tomcat 8.5   
   
1. 수정 및 추가 사항   
   
`	`릴레이션 스키마 수정   
   
`	`- INTEREST --> HOLDINGSTOCK 으로 릴레이션 이름 변경   
   
`	`- 그에 따른 내부의   
   
`	`- (In\_unum, In\_scode) --> (Hs\_unum, Hs\_scode) 속성명 변경   
   
`	`- 변경 사유 : 기존의 릴레이션 명이 릴레이션의 용도와 의미를 제대로 표현하지 못하여,   
   
`	`- 릴레이션 의미의 명확성을 위한 변경   
   
`	`데이터 추가   
   
`	`- phase3 에서 부족한 차트 데이터 추가   
   
`	`- 매도, 매수 및 차트 조회를 모든 주식에서 가능하도록 수정 완료   
   
`	`뷰 생성   
     
`	`- 변동률 확인을 위한 뷰 생성   
   
1. 유의 사항   
   
`	`필수   
   
`	`- orai18n.jar 추가 후 나오는 Tomcat Warnings 제거 방법 :   
   
`	`- 톰캣 xml 파일 중 context.xml에 <JarScanner scanManifest = "false"/> 추가   
   
`	`-   
   
`	`- 본인 컴퓨터의 톰캣 설치 경로의 Lib 폴더에 상기한 4개 jar 파일을 추가해 주지 않으면 실행할 때 오류가 발생함.   
    
`	`-   
    
`	`- apache-tomcat 디렉터리 내부의 lib 디렉터리에 jsoup.jar, json-simple.jar, orai18n.jar 추가 필요   
   
   
   
`	`추가 라이브러리   
    
`	`- JSON simple   
    
`	`- JSoup   
   
`	`- orai18n(for ojdbc8)  
    
1. 기능 설명    
    
`	`주식 메뉴	   
    
`	`주식 조회   
    
`	`- 코스피 상장 주식 조회(변동률, 시가, 종가, 고가, 저가)   
    
`	`- 섹터별 주식 조회    
    
    
     
`	`주식 거래    
     
`	`- 주식 차트 조회    
    
`	`- 종목과 관련된 뉴스 조회    

`	`- 로그인 후 매도 및 매수 가능     
      
`	`- 종목에 관한 기타 데이터 확인    
      
\-----------------------------------------------------    
    
`	`랭킹 메뉴    
    
     
     
`	`랭킹 조회     
    
`	`- 유저별 총 자산 랭킹 조회      
     
\-----------------------------------------------------     
     
`	`유저 메뉴    
     
`	`유저 설정     
     
`	`- 패스워드, 이메일, 연락처, 나이, 성별 변경 가능     
    
`	`- ID, 총 자산, 보유 현금 변경 불가능    
    
`	`거래 내역    
    
`	`- 총 거래 내역 조회    
     
`	`- 특정 기간 조회 가능    
     
`	`보유 자산     
    
`	`- 보유 주식량 및 평가 금액 조회     
    
\-----------------------------------------------------    
    
`	`관리자 메뉴    
   
     
     
`	`회원 관리   
    
`	`- 회원 정보 조회 및 수정    
    
`	`- 회원 삭제    
    
`	`통계 조회   
     
`	`- 회사 수, 섹터 수, 유저 수 조회    
    
`	`- 나이대별 유저 수 확인    
    
`	`- 유저 성비 확인     
     
## 동시성 제어 문제   
   
Phantom read를 방지하기 위해 isolation level을 repeatable read로 설정해야 하지만 오라클에서는 불가능하여   
      
실질적으로 DB접근을 담당하는 Oracle.java 파일 및 데이터 전달을 담당하는 News.java , SearchOption.java , UserDto.java 파일을 싱글톤 패턴으로 구현하였고,   
    
쿼리문을 실행하는 함수에 synchronized를 선언해 주어 동시성을 제어했습니다.   
    


